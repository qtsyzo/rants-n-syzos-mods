<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Linking | Syzo's Snowy Hub</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../assets/style.css" />
  <link rel="icon" type="image/png" href="../syzossnowypfp.png" />

  <meta property="og:title" content="Linking | Syzo's Snowy Hub" />
  <meta property="og:description" content="Get your personal linking code from Syzo's Snowy Hub!" />
  <meta property="og:url" content="https://syzomods.com/linking/" />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="https://syzomods.com/syzossnowypfp.png" />
</head>
<body>
  <canvas id="snow-canvas"></canvas>

  <header class="header">
    <h1 class="brand">ğŸ… Linking Portal ğŸ…</h1>
    <p class="sub">Generate your personal linking code below!</p>

    <div class="controls">
      <a class="btn" href="/">ğŸ  Home</a>
      <a class="btn" href="/apks/">ğŸ“± APKs</a>
      <a class="btn" href="/metadatas/">ğŸ§  Metadatas</a>
      <a class="btn" href="/obbs/">ğŸ“¦ OBBs</a>
    </div>
  </header>

  <main class="container" style="text-align:center;">
    <div id="link-box" style="
      background:white;
      border-radius:16px;
      box-shadow:0 8px 20px rgba(0,0,0,0.1);
      padding:30px;
      max-width:420px;
      margin:auto;
    ">
      <h2 style="color:#e43f5a;">Your Linking Code:</h2>
      <p id="code" style="
        font-size:1.8rem;
        font-weight:700;
        color:#3562f1;
        margin:20px 0;
      ">Loading...</p>
      <button id="newCode" class="btn primary">ğŸ” Generate New Code</button>
      <p style="color:#555;margin-top:15px;font-size:.9rem;">Use this code in your game to link your account.</p>
    </div>
  </main>

  <footer class="footer">Â© 2025 Syzo | Christmas Edition ğŸ…</footer>

  <div class="sound-btn" id="soundToggle">ğŸ”Š</div>
  <audio id="background-audio" src="../assets/coast-162.mp3" loop></audio>
  <div id="version-badge" class="version-badge">v1.2.0</div>

  <script src="../assets/scripts.js"></script>
  <script>
    const apiURL = 'https://link-bridge-rfug.onrender.com';
    const codeEl = document.getElementById('code');
    const btn = document.getElementById('newCode');

    async function fetchCode() {
      codeEl.textContent = 'Loading...';
      try {
        const res = await fetch(apiURL + '/new-code');
        const data = await res.json();
        if (data.code) codeEl.textContent = data.code;
        else codeEl.textContent = 'âŒ Could not get code.';
      } catch (err) {
        codeEl.textContent = 'âš ï¸ Error connecting to server.';
      }
    }

    btn.addEventListener('click', fetchCode);
    fetchCode();
  </script>
</body>
</html>
